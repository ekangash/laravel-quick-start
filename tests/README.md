# Pest PHP Testing Framework

Pest это быстрый и простой PHP-фреймворк для тестирования основан на PHP Unit и вдохновленный Jest. Он предоставляет 
удобный и выразительный синтаксис, который делает написание тестов более приятным и понятным.

Laravel фреймворк также поставляется с удобными вспомогательными методами, которые позволяют тестировать приложение.

## Настройка окружения

1) В контексте контейнера `db` необходимо добавить пустую базу данных `{project name}_test`.
2) В файле `.env.testing` указать данные к переменным окружениям базы данных контейнера.

## Запуск тестов

Все команды для запусков тестов запускаются в командной строке контейнера `app`. Для запуска тестов доступна 1 команда 
указанная в разделе scripts файла `composer.json`:

- `composer test` - запускает Pest в интерактивном режиме для просмотра и выполнения тестов.
  - В данной команде используется указание окружения тестирования `--env=testing`.

### Тестирование отдельного файла или директории

При запуске тестов по умолчанию выполняет полный набор тестов. Как и следовало ожидать, запуск отдельных тестов 
выполняется путем указания постфикса `->only()` к исполняемому тесту в качестве вызываемого аргумента:

```injectablephp
test('example', function () {
    expect(true)->toBeTrue();
})->only();
```

Подробное описание про "фильтрацию запусков теста" есть в [документации pest.](https://pestphp.com/docs/filtering-tests).
Однако стоит учесть, что выполнение тестов через исполняемый файл `./vendor/bin/pest` без указания тестового окружения
может внести изменения в производственной базе данных и удалить существующие медиа-ресурсы.

## Структура тестов

В приложении тесты следует организовывать следующим образом:

- Тесты следует писать в корневом каталоге `tests`.
- Структура именования каталогов должна копировать структуру основного приложения.
- Имена файлов с тестами должны иметь постфикс `Test.php`.


## Отладка тестов

Для отладки тестов необходимо настроить `xDebug` касательно инструкции `!cheatsheets/instructions/xdebug.md`:

## Полезные ресурсы

В процессе разработки проекта на Laravel используем следующие полезные ресурсы:

- [Pest](https://plugins.jetbrains.com/plugin/14636-pest) - документация фреймворка Pest, который позволяет
  значительно ускорить процесс написания тестов.
- [PhpStorm Pest Плагин](https://plugins.jetbrains.com/plugin/14636-pest) - это плагин для PhpStorm,
  который обеспечивает поддержку и интеграцию Pest фреймворка для написания тестов на PHP. Этот плагин добавляет удобные
  функции и возможности для работы с Pest в вашей среде разработки.
- [Документация утверждений PhpUnit](https://docs.phpunit.de/en/10.0/assertions.html) - Документация утверждений PhpUnit
  предоставляет подробное описание и примеры использования утверждений, доступных в PhpUnit.
- [Laravel Testing](https://laravel.com/docs/8.x/testing) - Подробное руководство по тестированию Laravel модулей.
